<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ArtCalc - –ü–£–û ü´°</title>
    <style>
        body { font-family: sans-serif; background: #121212; color: #e0e0e0; padding: 10px; }
        .block { background: #1e1e1e; border: 1px solid #333; padding: 15px; margin-bottom: 15px; border-radius: 10px; }
        h3 { color: #4CAF50; border-bottom: 2px solid #4CAF50; padding-bottom: 5px; margin-top: 0; text-transform: uppercase; font-size: 0.9em; }
        label { display: block; font-size: 0.8em; color: #bbb; margin-bottom: 3px; }
        .hint { font-size: 0.75em; color: #ff9800; margin-bottom: 8px; font-style: italic; }
        input { width: 100%; padding: 12px; background: #2a2a2a; border: 1px solid #444; color: white; border-radius: 6px; box-sizing: border-box; margin-bottom: 10px; }
        button { width: 100%; padding: 14px; background: #2e7d32; border: none; color: white; font-weight: bold; border-radius: 6px; cursor: pointer; text-transform: uppercase; width: 100%; }
        .result { margin-top: 12px; padding: 12px; background: #263238; border-left: 5px solid #4CAF50; font-family: monospace; white-space: pre-wrap; font-size: 1.1em; }
        .flex { display: flex; gap: 8px; }
        .flex div { flex: 1; }
    </style>
</head>
<body>

    <h2 style="text-align: center; color: #4CAF50;">ArtCalc: –ü–£–û ü´°</h2>

    <div class="block">
        <h3>1. –ü–ì–ó: –ö–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏ —Ç–∞ –≤–∏—Å–æ—Ç–∞</h3>
        <div class="flex">
            <input type="text" id="e_kt" placeholder="E –∫—Ç">
            <input type="text" id="n_kt" placeholder="N –∫—Ç">
            <input type="text" id="h_kt" placeholder="h –∫—Ç">
        </div>
        <div class="flex">
            <input type="text" id="on_val" placeholder="–û–ù">
            <input type="text" id="d_kt" placeholder="–ö—É—Ç–æ–º—ñ—Ä d">
        </div>
        <div class="flex">
            <input type="text" id="d_pgz" placeholder="–î–∞–ª—å–Ω—ñ—Å—Ç—å D">
            <input type="text" id="mc_val" placeholder="M—Ü (–Ω–∞–ø—Ä. 0,13)">
        </div>
        <button onclick="calculatePGZ()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –û–ì</button>
        <div id="resPGZ" class="result">...</div>
    </div>

    <div class="block">
        <h3>2. –û—Ä—ñ—î–Ω—Ç—É–≤–∞–Ω–Ω—è 1-—ó –≥–∞—Ä–º–∞—Ç–∏</h3>
        <input type="text" id="d_0_1" placeholder="–ö—É—Ç–æ–º—ñ—Ä –∑ –æ—Å–Ω–æ–≤–Ω–æ—ó –Ω–∞ 1-—à—É">
        <input type="text" id="beta_1st" placeholder="Œ≤ (—Ä–µ–π–∫–∞)">
        <button onclick="calculate1st()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ I —Ç–∞ –£</button>
        <div id="res1st" class="result">...</div>
    </div>

    <div class="block">
        <h3>3. –ì–ª–∏–±–∏–Ω–∞ —É–∫—Ä–∏—Ç—Ç—è</h3>
        <div class="flex">
            <input type="text" id="dt_ukr" placeholder="–î—Ç (—Ü—ñ–ª—å)">
            <input type="text" id="d_ukr" placeholder="d (–≥—Ä–µ–±—ñ–Ω—å)">
        </div>
        <div class="flex">
            <input type="text" id="h_sp" placeholder="h —Å–ø">
            <input type="text" id="h_gr_ukr" placeholder="h –≥—Ä">
            <input type="text" id="h_vp" placeholder="h –≤–ø">
        </div>
        <button onclick="calculateUkr()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –ì —É–∫—Ä</button>
        <div id="resUkr" class="result">...</div>
    </div>

    <div class="block">
        <h3>4. –ù–∞–π–º–µ–Ω—à–∏–π –ø—Ä–∏—Ü—ñ–ª</h3>
        <p class="hint">‚ö†Ô∏è –∫—É—Ç –∞–ª—å—Ñ–∞ –±–µ—Ä–µ–º–æ –∑ –¢–° –∞–±–æ ¬´–ö—Ä–æ–ø–∏–≤–∏¬ª</p>
        <input type="text" id="hgr_min" placeholder="h–≥—Ä (–≤–∏—Å–æ—Ç–∞ –≥—Ä–µ–±–Ω—è)">
        <input type="text" id="d_min" placeholder="D (–¥–∞–ª—å–Ω—ñ—Å—Ç—å –¥–æ –≥—Ä–µ–±–Ω—è)">
        <input type="text" id="alpha_min" placeholder="–∫—É—Ç –∞–ª—å—Ñ–∞">
        <button onclick="calculateMinPr()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ –ü—Ä –º—ñ–Ω</button>
        <div id="resMin" class="result">...</div>
    </div>

    <div class="block">
        <h3>5. ŒîV0 —Å—É–º –Ω–µ–≤—ñ–¥–æ–º–æ—ó –ø–∞—Ä—Ç—ñ—ó</h3>
        <label>ŒîV0 —Å—É–º –í–Ü–î–û–ú–û–á –ø–∞—Ä—Ç—ñ—ó:</label>
        <input type="text" id="dv0_known" placeholder="–ù–∞–ø—Ä. -1.2">
        <div class="flex">
            <div>
                <label>–î—Ç –í–Ü–î–û–ú–û–á –ø–∞—Ä—Ç—ñ—ó:</label>
                <input type="text" id="dt_known" placeholder="–î—Ç –≤—ñ–¥.">
            </div>
            <div>
                <label>–î—Ç –ù–ï–í–Ü–î–û–ú–û–á –ø–∞—Ä—Ç—ñ—ó:</label>
                <input type="text" id="dt_unknown" placeholder="–î—Ç –Ω–µ–≤.">
            </div>
        </div>
        <label>ŒîX Vo (–∑ –¢–°):</label>
        <input type="text" id="dx_vo" placeholder="–î–µ–ª—å—Ç–∞ XVo">
        <button onclick="calculateDV0()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ ŒîV0 —Å—É–º</button>
        <div id="resDV0" class="result">...</div>
    </div>

    <div class="block">
        <h3>6. –í—ñ—è–ª–æ —Ç–∞ –ø—Ä–∏—Ü—ñ–ª 1-—ó –≥–∞—Ä–º–∞—Ç–∏</h3>
        <p class="hint">‚ö†Ô∏è I —Ç–∞ –£ –±–µ—Ä—É—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑ –ë–ª–æ–∫—É 2</p>
        <label>–î–æ–≤–æ—Ä–æ—Ç –æ—Å–Ω–æ–≤–Ω–æ—ó (–Ω–∞–ø—Ä. -1,23):</label>
        <input type="text" id="on_main" placeholder="–Ω–∞–ø—Ä. -1,20">
        <label>–ü—Ä–∏—Ü—ñ–ª –æ—Å–Ω–æ–≤–Ω–æ—ó:</label>
        <input type="text" id="pr_main" placeholder="–ü—Ä–∏—Ü—ñ–ª">
        <label>–î—Ç (–¥–∞–ª—å–Ω—ñ—Å—Ç—å –¥–æ —Ü—ñ–ª—ñ):</label>
        <input type="text" id="dt_fan" placeholder="–î—Ç">
        <label>ŒîX (—Ü—ñ–Ω–∞ –ø–æ–¥—ñ–ª–∫–∏ –ø—Ä–∏—Ü—ñ–ª—É):</label>
        <input type="text" id="dx_val" placeholder="ŒîX">
        <button onclick="calculateFan()">–†–æ–∑—Ä–∞—Ö—É–≤–∞—Ç–∏ 1-—à—É</button>
        <div id="resFan" class="result">...</div>
    </div>

    <script>
        let global_I = 0;
        let global_U = 0;

        function parseArt(val) { return parseFloat(val.toString().replace(',', '.')); }

        function formatResultDovorot(val) {
            let sign = val >= 0 ? "+" : "-";
            let absVal = Math.round(Math.abs(val) * 100) / 100;
            let cel = Math.floor(absVal);
            let ost = Math.round((absVal - cel) * 100);
            if (ost >= 100) { cel += 1; ost -= 100; }
            return `${sign}${cel.toString().padStart(2, '0')}-${ost.toString().padStart(2, '0')}`;
        }

        function calculatePGZ() {
            let e = parseArt(document.getElementById('e_kt').value), n = parseArt(document.getElementById('n_kt').value), h = parseArt(document.getElementById('h_kt').value);
            let on = parseArt(document.getElementById('on_val').value), d_kt = parseArt(document.getElementById('d_kt').value);
            let dist = parseArt(document.getElementById('d_pgz').value), mc_raw = document.getElementById('mc_val').value.replace(',', '.');
            let alpha = on - d_kt; if (on < d_kt) alpha += 60;
            let mc = parseFloat(mc_raw); if (Math.abs(mc) < 1 && mc !== 0) mc *= 100;
            let rad = (alpha * 6) * (Math.PI / 180);
            document.getElementById('resPGZ').innerHTML = `E: ${Math.round(e + dist * Math.sin(rad))}\nN: ${Math.round(n + dist * Math.cos(rad))}\nh: ${Math.round(h + (mc * dist) / 955)}`;
        }

        function calculate1st() {
            let dk = parseArt(document.getElementById('d_0_1').value), beta = parseArt(document.getElementById('beta_1st').value);
            let alpha = dk + 30; if (alpha >= 60) alpha -= 60;
            let dist = (2 * 955) / (beta * 100);
            let rad = (alpha * 6) * (Math.PI / 180);
            global_I = dist * Math.sin(rad);
            global_U = -(dist * Math.cos(rad));
            document.getElementById('res1st').innerHTML = `I: ${global_I.toFixed(2)}–º\n–£: ${global_U.toFixed(2)}–º\n(–î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–æ)`;
        }

        function calculateUkr() {
            let dt = parseArt(document.getElementById('dt_ukr').value), d = parseArt(document.getElementById('d_ukr').value);
            let hs = parseArt(document.getElementById('h_sp').value), hg = parseArt(document.getElementById('h_gr_ukr').value), hv = parseArt(document.getElementById('h_vp').value);
            let D_val = dt - d;
            let res = (hg - hv) - (((hs - hv) - (hg - hv)) * d / D_val);
            document.getElementById('resUkr').innerHTML = `–ì —É–∫—Ä: ${res.toFixed(2)} –º`;
        }

        function calculateMinPr() {
            let hg = parseArt(document.getElementById('hgr_min').value), d = parseArt(document.getElementById('d_min').value), a = parseArt(document.getElementById('alpha_min').value);
            let bn = (hg * 955) / d;
            document.getElementById('resMin').innerHTML = `–ë–µ—Ç–∞ n: ${bn.toFixed(2)}\n–ü—Ä –º—ñ–Ω: ${(bn + a).toFixed(2)}`;
        }

        function calculateDV0() {
            let dv = parseArt(document.getElementById('dv0_known').value), dtk = parseArt(document.getElementById('dt_known').value), dtu = parseArt(document.getElementById('dt_unknown').value), dx = parseArt(document.getElementById('dx_vo').value);
            let total = dv + ((dtu - dtk) / dx);
            document.getElementById('resDV0').innerHTML = `ŒîV0 –°–£–ú (–Ω–µ–≤): ${total.toFixed(2)} %`;
        }

        function calculateFan() {
            let on_m = parseArt(document.getElementById('on_main').value);
            let pr_m = parseArt(document.getElementById('pr_main').value);
            let dt = parseArt(document.getElementById('dt_fan').value);
            let dx = parseArt(document.getElementById('dx_val').value);

            if (global_I === 0 && global_U === 0) { alert("–†–æ–∑—Ä–∞—Ö—É–π—Ç–µ –ë–ª–æ–∫ 2!"); return; }

            // –í—ñ—è–ª–æ –≤ –ø–æ–¥—ñ–ª–∫–∞—Ö
            let fan_raw = (global_I * 955) / dt / 100;
            // –î—ñ–ª–∏–º–æ –≤—ñ—è–ª–æ –Ω–∞ 100 –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ —Ñ–æ—Ä–º–∞—Ç—É —á–∏—Å–ª–∞ –∑ –∫–æ–º–æ—é
            let fan_for_calc = fan_raw / 100;
            
            let on1 = on_m + fan_for_calc;
            let pr1 = pr_m + (global_U / dx);

            document.getElementById('resFan').innerHTML = 
                `–í—ñ—è–ª–æ: ${fan_raw.toFixed(2)}  –ø–æ–¥.\n` +
                `–û–ù 1-—ó: ${formatResultDovorot(on1)}\n` +
                `–ü—Ä–∏—Ü—ñ–ª 1-—ó: ${pr1.toFixed(1)}`;
        }
    </script>
</body>
</html>
